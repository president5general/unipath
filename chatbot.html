<!D<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unipath â€” AI Bot</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Chat styles */
    .chat-window {
      border: 1px solid #ccc;
      padding: 10px;
      height: 400px;
      overflow-y: auto;
      background: #fafafa;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .chat-message {
      margin: 8px 0;
      padding: 8px 12px;
      border-radius: 12px;
      max-width: 75%;
    }

    .chat-message.user {
      background: #007bff;
      color: #fff;
      margin-left: auto;
    }

    .chat-message.bot {
      background: #eee;
      color: #333;
      margin-right: auto;
    }

    /* Moving book animation */
    .book {
      width: 80px;
      height: 100px;
      background: url('https://cdn-icons-png.flaticon.com/512/29/29302.png') no-repeat center;
      background-size: contain;
      position: absolute;
      top: 50px;
      left: 0;
      animation: moveBook 10s linear infinite;
    }

    @keyframes moveBook {
      0% { left: 0; transform: rotate(0deg); }
      50% { left: 80%; transform: rotate(15deg); }
      100% { left: 0; transform: rotate(0deg); }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="index.html">Unipath</a>
      <input type="checkbox" id="nav-toggle" class="nav-toggle" />
      <label for="nav-toggle" class="hamburger">â˜°</label>
      <nav class="nav">
        <a href="index.html">Home</a>
        <a href="search.html">Find Universities</a>
        <a href="donate.html">Donate</a>
        <a href="stories.html">Student Stories</a>
        <a href="chatbot.html" class="active">AI Bot</a>
        <a href="login.html" class="btn btn-small">Login</a>
      </nav>
    </div>
  </header>

  <!-- Moving Book -->
  <div class="book"></div>

  <!-- Chatbot Section -->
  <section class="section">
    <div class="container chatbot-container">
      <h1>Unipath AI Assistant</h1>
      <p>Ask me about affordable universities, scholarships, or how to apply.</p>

      <div class="chat-window" id="chat-window">
        <div class="chat-message bot">Hello! Iâ€™m Unipath AI ðŸ¤–. How can I help you today?</div>
      </div>

      <form class="chat-form" id="chat-form">
        <input type="text" id="chat-input" placeholder="Type your message..." required />
        <button type="submit" class="btn">Send</button>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footer-inner">
      <strong>Unipath</strong>
      <p>Opening doors to affordable education.</p>
      <p class="copyright">Â© 2025 Unipath. All rights reserved.</p>
    </div>
  </footer>

  <!-- Chatbot Script -->
  <script>
    const form = document.getElementById('chat-form');
    const chatWindow = document.getElementById('chat-window');
    const chatInput = document.getElementById('chat-input');

    // Function to add message
    function addMessage(text, sender) {
      const msg = document.createElement('div');
      msg.classList.add('chat-message', sender);
      msg.textContent = text;
      chatWindow.appendChild(msg);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    // Choose AI provider: 'openai' or 'gemini'
    const AI_PROVIDER = 'openai'; // change to 'gemini' if needed
    const OPENAI_KEY = 'YOUR_OPENAI_API_KEY';
    const GEMINI_KEY = 'YOUR_GOOGLE_API_KEY';

    async function getAIResponse(message) {
      if (AI_PROVIDER === 'openai') {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${OPENAI_KEY}`
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [{ role: "user", content: message }]
          })
        });
        const data = await response.json();
        return data.choices[0].message.content;
      } else if (AI_PROVIDER === 'gemini') {
        const response = await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GEMINI_KEY}`,
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              contents: [{ role: "user", parts: [{ text: message }] }]
            })
          }
        );
        const data = await response.json();
        return data.candidates[0].content[0].text || "Sorry, no response from Gemini.";
      }
      return "AI provider not configured!";
    }

    // Handle chat submission
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      const message = chatInput.value.trim();
      if (!message) return;

      // Display user message
      addMessage(message, "user");

      // Display loading
      const botMsg = document.createElement('div');
      botMsg.classList.add('chat-message', 'bot');
      botMsg.textContent = "Thinking...";
      chatWindow.appendChild(botMsg);
      chatWindow.scrollTop = chatWindow.scrollHeight;

      try {
        const aiReply = await getAIResponse(message);
        botMsg.textContent = aiReply;
      } catch (err) {
        botMsg.textContent = "Sorry, something went wrong!";
        console.error(err);
      }

      chatInput.value = '';
    });
  </script>

</body>
</html>
