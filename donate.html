<!-- General Donation -->
<section class="section alt">
  <div class="container">
    <h2>Donate to the General Fund</h2>
    <form id="donationRedirectForm" class="donation-form">
      <div class="form-group">
        <label for="amount">Donation Amount:</label>
        <input type="number" id="amount" placeholder="e.g. 50" required />
      </div>

      <div class="form-group">
        <label for="currency">Currency:</label>
        <select id="currency" required>
          <option value="USD">USD — US Dollar</option>
          <option value="EUR">EUR — Euro</option>
          <option value="GBP">GBP — British Pound</option>
          <option value="ZAR">ZAR — South African Rand</option>
          <option value="AUD">AUD — Australian Dollar</option>
          <option value="CAD">CAD — Canadian Dollar</option>
          <option value="INR">INR — Indian Rupee</option>
          <option value="JPY">JPY — Japanese Yen</option>
          <option value="CNY">CNY — Chinese Yuan</option>
          <option value="NGN">NGN — Nigerian Naira</option>
          <option value="KES">KES — Kenyan Shilling</option>
          <option value="BWP">BWP — Botswana Pula</option>
          <option value="other">Other (type manually)</option>
        </select>
      </div>

      <div class="form-group hidden" id="customCurrencyGroup">
        <label for="customCurrency">Enter Currency Code (e.g. MXN for Peso):</label>
        <input type="text" id="customCurrency" maxlength="3" placeholder="e.g. MXN" />
      </div>

      <button type="submit" class="btn">Donate Now</button>
    </form>
  </div>
</section>

<script>
// Show input if "Other" is chosen
document.getElementById("currency").addEventListener("change", function() {
    const customGroup = document.getElementById("customCurrencyGroup");
    if(this.value === "other") {
        customGroup.classList.remove("hidden");
    } else {
        customGroup.classList.add("hidden");
    }
});

// Redirect to checkout with currency + amount
document.getElementById("donationRedirectForm").addEventListener("submit", function(e){
    e.preventDefault();
    const amount = document.getElementById("amount").value;
    let currency = document.getElementById("currency").value;
    if(currency === "other") {
        currency = document.getElementById("customCurrency").value.toUpperCase();
    }
    window.location.href = "checkout.html?amount=" + amount + "&currency=" + currency;
});
</script>

<style>
.hidden { display: none; }
</style>
